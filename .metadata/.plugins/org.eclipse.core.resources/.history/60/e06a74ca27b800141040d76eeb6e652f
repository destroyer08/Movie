import re
import imdb
def show_watched(dic):
    print("\n********YOUR WATCHED MOVIES AND RATING********\n")
    for key, rating in dic.iteritems():
        print("{} {}".format(key,rating[0]))
       
def get_imdb_rating(dic):
    ia = imdb.IMDb()
    dic2 = {}
    for title in dic.iterkeys():
        t = str(title).strip()
        s_result = ia.search_movie(t)
        the_unt = s_result[0]
        ia.update(the_unt)
        irate = the_unt["rating"]
        dic2[t] = irate
        print("{} {}".format(t,irate))
    return(dic2)

file = open("watched.txt","r")

s = file.readline()
#n= map(int,re.findall("\s+", s))
dic = {}
while(s):
    rating = map(int,re.findall("\d+",s,))
    temp = re.findall("\S+", s,)
    m = len(temp)
    s = ""
    for i in range(m-1):
        s+= temp[i]+" "
    dic[s] = rating
    s = file.readline()
#show_watched(dic)
dic2 = get_imdb_rating(dic)
for title in dic.iterkeys():
    print("{} {}".format(str(title).strip(),dic[title]))